jobs:
  deploy:
    runs-on: ubuntu-latest
    env:
      UNITY_EMAIL: ${{ secrets.UNITY_EMAIL }}
      UNITY_PASSWORD: ${{ secrets.UNITY_PASSWORD }}
      UNITY_SERIAL: ''   # Personal이면 공백/생략 가능
    steps:
      - name: 코드 체크아웃
        uses: actions/checkout@v4
        with: { lfs: true }

      - name: Cache Unity Library
        uses: actions/cache@v4
        with:
          path: Library
          key: Library-${{ runner.os }}-${{ hashFiles('**/Packages/manifest.json') }}
          restore-keys: |
            Library-${{ runner.os }}-

      - name: WebGL 빌드
        uses: game-ci/unity-builder@v4
        with:
          unityVersion: 2022.3.22f1
          targetPlatform: WebGL
          projectPath: .
          buildsPath: Build
